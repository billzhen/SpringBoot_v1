(this.webpackJsonpreciptprinter=this.webpackJsonpreciptprinter||[]).push([[0],{100:function(e,t){},102:function(e,t){},135:function(e,t){},136:function(e,t){},178:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(85),u=n.n(c),o=(n(94),n(88)),i=n(5),s=(n(95),n(96),n(1)),l=n.n(s),p=n(4),f=n(86),d=n.n(f),b=function(){return(new Date).getTime()},m=function(){var e=new Date,t=e.getDate().toString(),n=(e.getMonth()+1).toString(),r=e.getFullYear().toString();return console.log(t),console.log(n),console.log(n),n.length<2&&(n=n="0"+n),t.length<2&&(t="0"+t),r+"-"+n+"-"+t},v=function(e,t,n){return r=e+t+n,d.a.createHash("sha1").update(r).digest("hex");var r},h=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return n=e.sent,r="<CB>Revive & Thrive<BR>",r+="<N><C>2023 \u58f9.\u96f6 Annual Dinner<BR>",r=(r=(r+="<BR><BR>")+"<N><C>\u6b22\u8fce"+t.name+",<BR>")+"<N><C>\u7b2c"+n+"\u4e2a\u62e5\u62b1\u672a\u6765\u7684\u58f9.\u96f6er<BR>",r+="<BR><BR>",r+="<L><N>--------------------------------<BR>",r+="<N><C>\u4f60\u7684\u5fc3\u613f<BR>",r+="<BR><BR>",r+="<N><C>\u5e74\u5e74\u65e2\u6b22\u559c<BR>",r+="<N><C>\u5c81\u5c81\u540c\u559c\u5e86<BR>",r+="<BR><BR>",r+="<N><R>2023\u5e743\u670810\u65e5<BR>",r+="<L><N>--------------------------------<BR>",r+="<IMG></IMG>",r+="<BR>",r+="<L><N>TIPS #1 \u4fdd\u7559\u5c0f\u7968\u7559\u4e0b\u4e13\u5c5e\u56de\u5fc6<BR>",r+="<L><N>TIPS #2 \u626b\u7801\u8fdb\u5165\u5e74\u4f1a\u76f8\u518c",r+="<C><QR>https://www.xpyun.net</QR></C>",e.abrupt("return",r);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g={url:{save:"http://localhost:8080/setWish",getlist:"http://localhost:8080/getWish"},pages:{home:"home",printList:"printList",input:"input",welcome:"welcome",success:"success",failed:"failed"},xpyun:{apis:{getPrinter:{url:"/api/openapi/ddPrinters",method:"POST"},printRecept:{url:"/api/openapi/xprinter/print",method:"POST"},getSN:{url:"/api/openapi/xprinter/queryOrderStatis",method:"POST"}}}};function O(e,t,n){return new Promise((function(r,a){fetch(e,t).then((function(e){return console.log(e),n?e.json():e})).then((function(e){console.log(e),r(e)})).catch((function(e){console.log(e),r(!1)}))}))}var x=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.t0=E,e.next=4,O(g.url.save,n,!0);case 4:return e.t1=e.sent,e.next=7,(0,e.t0)(e.t1);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{"Content-Type":"application/json"}},e.t0=w,e.next=4,O(g.url.getlist,t,!0);case 4:return e.t1=e.sent,e.next=7,(0,e.t0)(e.t1);case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("saveResultValidation"),console.log(t),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getPrintListValidation"),console.log(t),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Date,console.log(parseInt(n));case 2:if(!(parseInt(new Date-n)<t)){e.next=6;break}return e.abrupt("continue",2);case 6:return e.abrupt("return","");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S="417770773@qq.com",y="e442232f7e044db79041a78f6c9b65b1",C=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b(),n=m(),console.log(n),r={method:"POST",headers:{"Content-Type":"application/json"},json:!0,encoding:"utf-8",body:JSON.stringify({sn:"748PG68WQZ8694A",date:n,user:S,timestamp:t,sign:v(S,y,t),debug:"0"})},e.next=6,O(g.xpyun.apis.getSN.url,r,!0);case 6:if(0!==(a=e.sent).code){e.next=9;break}return e.abrupt("return",a.data.printed);case 9:return e.abrupt("return",0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b(),e.t0={"Content-Type":"application/json"},e.t1=JSON,e.t2="748PG68WQZ8694A",e.next=6,h(t);case 6:return e.t3=e.sent,e.t4=S,e.t5=n,e.t6=v(S,y,n),e.t7={sn:e.t2,content:e.t3,copies:1,voice:1,user:e.t4,timestamp:e.t5,sign:e.t6,debug:"0"},e.t8=e.t1.stringify.call(e.t1,e.t7),r={method:"POST",headers:e.t0,json:!0,encoding:"utf-8",body:e.t8},e.next=15,O(g.xpyun.apis.printRecept.url,r,!0);case 15:if(a=e.sent,console.log(a),0!==a.code){e.next=21;break}return e.abrupt("return",!0);case 21:return e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function N(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),o=Object(i.a)(u,2),s=o[0],f=o[1],d=Object(r.useState)(""),b=Object(i.a)(d,2),m=b[0],v=b[1],h=Object(r.useState)(!1),O=Object(i.a)(h,2),x=(O[0],O[1],Object(r.useState)(!1)),j=Object(i.a)(x,2),E=j[0],w=j[1],k=Object(r.useContext)(J),S=function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,R({staffId:s,name:n,text:m});case 3:t=e.sent,y(k,t?g.pages.success:g.pages.failed);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(e,t){e({id:t})};return a.a.createElement("div",null,E?a.a.createElement("div",null,"printing......"):a.a.createElement("div",null,a.a.createElement("input",{type:"text",onChange:function(e){v(e.target.vaFghjlue)},value:m})," ","\u795d\u798f",a.a.createElement("br",null),a.a.createElement("input",{type:"text",onChange:function(e){c(e.target.value)},value:n})," ","name",a.a.createElement("br",null),a.a.createElement("input",{type:"text",onChange:function(e){f(e.target.value)},value:s})," ","staff id",a.a.createElement("br",null),a.a.createElement("button",{onClick:S},"\u5f00\u59cb\u6253\u5370")))}var T=n(87),B=function(){var e=Object(p.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),8043,r=0,e.next=5,P(n||"0.0.0.0",8043);case 5:if(!(a=e.sent).printer){e.next=11;break}return e.next=9,I(t,a.printer);case 9:e.next=12;break;case 11:r=a.error;case 12:return e.abrupt("return",{error:r});case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var a=new window.epson.ePOSDevice;a.connect(t,n,(function(t){console.log(t),"OK"==t||"SSL_CONNECT_OK"==t?a.createDevice("local_printer",a.DEVICE_TYPE_PRINTER,{crypto:!0,buffer:!1},(function(t,n){e("ok"==n?{printer:t}:{printer:!1,error:2})})):e({printer:!1,error:1})}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("start print data"),console.log(t),r=document.getElementById("canvas"),a=r.getContext("2d"),n.addTextAlign(n.ALIGN_LEFT),n.addTextAlign(n.ALIGN_LEFT),n.addTextLineSpace(35),n.addTextFont(n.FONT_D),a&&n.addImage(a,10,10,219,81,n.COLOR_1,n.MODE_MONO),n.addText(t),n.addFeed(1),n.addCut(n.CUT_FEED),n.send();case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=!1;function D(){var e=Object(r.useState)(0),t=Object(i.a)(e,2),n=(t[0],t[1],Object(r.useState)(!1)),c=Object(i.a)(n,2),u=c[0],o=c[1],s=Object(r.useState)([]),f=Object(i.a)(s,2),d=f[0],b=f[1],m=Object(r.useState)(""),v=Object(i.a)(m,2),h=v[0],g=v[1],O=Object(r.useState)(!1),E=Object(i.a)(O,2),w=E[0],S=E[1],y=Object(r.useState)(!1),C=Object(i.a)(y,2),R=C[0],N=C[1],P=function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L=!1,o(!0),S(!1),N(!1),e.next=6,j();case 6:if(!(t=e.sent)){e.next=12;break}return e.next=10,_(t);case 10:e.next=13;break;case 12:S(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x({staffName:(new Date).toISOString(),staffId:"staff",wish:"text"});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){L=!0},_=function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.length),n=t;case 2:if(!(n.length>0)){e.next=21;break}return b(Object(T.a)(n)),g(n[n.length-1].staffName),e.next=7,B(n[n.length-1]);case 7:return e.sent,e.next=10,k(2e3);case 10:if(0!=(!0).error){e.next=16;break}n.pop(),b(n),e.next=19;break;case 16:return L=!0,N(!0),e.abrupt("break",21);case 19:e.next=2;break;case 21:if(L){e.next=24;break}return e.next=24,P();case 24:o(!1);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){console.log(d)}),[d]);return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("p",null,"Printer Job List"),a.a.createElement("ol",null,d.map((function(e,t){return a.a.createElement("ul",null,e.staffName)}))),u?a.a.createElement("div",null,"current job for ",h):"")),a.a.createElement("div",null,w?a.a.createElement("div",null,a.a.createElement("div",null,"network issue now .............")):""),a.a.createElement("div",null,R?a.a.createElement("div",null,a.a.createElement("div",null,"printer issue now .............")):""),a.a.createElement("div",null,u?a.a.createElement("div",null,"job start...."):a.a.createElement("div",null,a.a.createElement("form",null,a.a.createElement("button",{onClick:P},"start Print Job")))),a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("form",null,a.a.createElement("button",{onClick:D},"stop Print Job")))),a.a.createElement("div",null,a.a.createElement("form",null,a.a.createElement("button",{onClick:I},"add"))))}function _(){Object(r.useContext)(J);return a.a.createElement("div",null,"success")}function A(){var e=Object(r.useContext)(J);return a.a.createElement("div",null,a.a.createElement("div",{onClick:function(){!function(e,t){e({id:t})}(e,g.pages.input)}},a.a.createElement("img",{src:"/welcome.webp"})))}function F(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=(t[0],t[1],Object(r.useState)("")),c=Object(i.a)(n,2),u=(c[0],c[1],Object(r.useState)("")),o=Object(i.a)(u,2),s=(o[0],o[1],Object(r.useState)(!1)),f=Object(i.a)(s,2),d=(f[0],f[1],Object(r.useState)(!1)),b=Object(i.a)(d,2),m=(b[0],b[1],Object(r.useContext)(J)),v=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(m,g.pages.input);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e,t){e({id:t})};return a.a.createElement("div",null," ",a.a.createElement("div",null,a.a.createElement("div",null,"failed "),a.a.createElement("button",{onClick:v},"retry")))}var J=a.a.createContext({changeRoute:function(){}});var G=function(){var e=Object(r.useState)({id:"",data:{}}),t=Object(i.a)(e,2),n=t[0],c=t[1],u=null;return function(){switch(console.log(n),n.id){case g.pages.home:u=N;break;case g.pages.printList:u=D;break;case g.pages.input:u=N;break;case g.pages.welcome:u=A;break;case g.pages.success:u=_;break;case g.pages.failed:u=F;break;default:u=A}}(),a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("div",null,a.a.createElement(J.Provider,{value:function(e){c((function(t){return Object(o.a)({},e)}))}},a.a.createElement(u,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},89:function(e,t,n){e.exports=n(178)},94:function(e,t,n){},95:function(e,t,n){e.exports=n.p+"static/media/logo.ee7cd8ed.svg"},96:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.cec78131.chunk.js.map